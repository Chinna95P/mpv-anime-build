<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    
    <title>MPV Anime Upscaling Config v1.5.1 | 4K Anime4K & NNEDI3 Automated Resolution Adaptive Upscaling</title>
    
    <meta name="description" content="Automated MPV configuration for real-time 4K anime upscaling. Restores old anime using Anime4K v4.0 and enhances live-action using resolution adaptive sharpening.">
    
    <meta name="google-site-verification" content="-b34UEuV_TSu0alUSUY-xI03FbCL1JBURzYQMp7uT7Q" />

    <meta property="og:type" content="website">
    <meta property="og:url" content="https://chinna95p.github.io/mpv-anime-build/">
    <meta property="og:title" content="MPV Anime Upscaling Config v1.5.1">
    <meta property="og:description" content="Automated MPV configuration for real-time 4K anime upscaling. Restores old anime using Anime4K v4.0 and enhances live-action using resolution adaptive sharpening.">
    <meta property="og:image" content="https://chinna95p.github.io/mpv-anime-build/screenshots/anime-on.jpg">

    <meta property="twitter:card" content="summary_large_image">
    <meta property="twitter:title" content="MPV Anime Upscaling Config v1.5.1">
    <meta property="twitter:description" content="Automated MPV configuration for real-time 4K anime upscaling. Restores old anime using Anime4K v4.0 and enhances live-action using resolution adaptive sharpening.">
    <meta property="twitter:image" content="https://chinna95p.github.io/mpv-anime-build/screenshots/anime-on.jpg">
    
<link rel="icon" type="image/svg+xml" href="https://chinna95p.github.io/mpv-anime-build/favicon.svg">

    <script src="https://cdn.jsdelivr.net/npm/marked/marked.min.js"></script>

    <style>
        /* --- CORE VARIABLES --- */
        :root {
            --bg-color: #0d1117;
            --card-bg: #161b22;
            --text-main: #c9d1d9;
            --text-muted: #8b949e;
            --accent-green: #238636;
            --accent-green-hover: #2ea043;
            --accent-blue: #1f6feb;
            --accent-blue-hover: #388bfd;
            --border-color: #30363d;
        }

        /* --- RESET & TYPOGRAPHY --- */
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body {
            font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Helvetica, Arial, sans-serif;
            background-color: var(--bg-color);
            color: var(--text-main);
            line-height: 1.6;
            overflow-x: hidden;
        }

        /* --- ANIMATIONS --- */
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }
        .reveal { opacity: 0; transform: translateY(30px); transition: all 0.8s ease-out; }
        .reveal.active { opacity: 1; transform: translateY(0); }

        /* --- LAYOUT UTILS --- */
        .container { max-width: 1100px; margin: 0 auto; padding: 0 20px; }
        
        .btn {
            display: inline-block; padding: 12px 30px; font-size: 1.1rem; font-weight: 600;
            color: white; background-color: var(--accent-green); border-radius: 6px;
            text-decoration: none; transition: transform 0.2s, background-color 0.2s;
            border: none; cursor: pointer;
        }
        .btn:hover { background-color: var(--accent-green-hover); transform: translateY(-2px); }

        .btn-blue {
            background-color: var(--accent-blue);
            margin-left: 10px;
        }
        .btn-blue:hover { background-color: var(--accent-blue-hover); }

        /* --- HERO SECTION --- */
        header {
            padding: 100px 0 60px 0; 
            text-align: center;
            background: radial-gradient(circle at top right, #1f2428 0%, #0d1117 60%);
        }
        .hero-content h1 {
            font-size: 4rem; font-weight: 800;
            background: linear-gradient(135deg, #fff 0%, #aaa 100%);
            -webkit-background-clip: text; -webkit-text-fill-color: transparent;
            margin-bottom: 1rem; animation: fadeIn 1s ease-out;
        }
        .hero-content p {
            font-size: 1.5rem; color: var(--text-muted); margin-bottom: 2.5rem;
            animation: fadeIn 1s ease-out 0.3s backwards;
        }
        .hero-buttons { animation: fadeIn 1s ease-out 0.6s backwards; margin-bottom: 40px;}

        /* --- DOCS NAV --- */
        .docs-nav {
            display: flex; justify-content: center; gap: 15px; flex-wrap: wrap;
            margin-top: 30px; animation: fadeIn 1s ease-out 0.9s backwards;
        }
        .doc-btn {
            background: rgba(255,255,255,0.05);
            border: 1px solid var(--border-color);
            color: var(--text-main);
            padding: 10px 20px;
            border-radius: 20px;
            font-size: 0.95rem;
            cursor: pointer;
            transition: all 0.2s;
            text-decoration: none;
            display: flex; align-items: center; gap: 8px;
        }
        .doc-btn:hover {
            background: rgba(255,255,255,0.1);
            border-color: var(--accent-blue);
            transform: translateY(-2px);
            color: #fff;
        }

        /* --- PREMIUM SLIDER CSS --- */
        .slider-section { padding: 60px 0; background-color: #12161c; }
        .slider-title { text-align: center; font-size: 2rem; margin-bottom: 40px; color: #fff; }

        .c-compare {
            --handle-width: 50px;
            --handle-color: #fff;
            position: relative; width: 100%; max-width: 900px; height: 500px; 
            margin: 0 auto 80px auto; border-radius: 12px; overflow: hidden;
            border: 1px solid var(--border-color); box-shadow: 0 20px 50px rgba(0,0,0,0.6); user-select: none;
        }
        .c-compare__left, .c-compare__right { position: absolute; top: 0; left: 0; width: 100%; height: 100%; overflow: hidden; }
        .c-compare__right { z-index: 1; }
        .c-compare__left { z-index: 2; width: 50%; border-right: 2px solid rgba(255,255,255,0.8); box-shadow: 5px 0 20px rgba(0,0,0,0.5); }
        .c-compare__image { position: absolute; top: 0; left: 0; height: 100%; object-fit: cover; width: 100%; max-width: none; pointer-events: none; }
        .c-compare__handle {
            position: absolute; top: 50%; left: 50%; width: var(--handle-width); height: var(--handle-width);
            background: var(--handle-color); border-radius: 50%; transform: translate(-50%, -50%);
            z-index: 3; cursor: col-resize; box-shadow: 0 0 15px rgba(0,0,0,0.5);
            display: flex; align-items: center; justify-content: center; transition: transform 0.1s;
        }
        .c-compare__handle:hover { transform: translate(-50%, -50%) scale(1.1); }
        .c-compare__handle::after { content: ''; display: block; width: 12px; height: 12px; border-top: 3px solid #333; border-right: 3px solid #333; transform: rotate(45deg); margin-left: -4px; }
        .c-compare__handle::before { content: ''; display: block; width: 12px; height: 12px; border-bottom: 3px solid #333; border-left: 3px solid #333; transform: rotate(45deg); margin-right: -4px; }
        .c-label {
            position: absolute; bottom: 20px; padding: 6px 14px; background: rgba(0,0,0,0.7);
            color: #fff; font-weight: bold; font-size: 0.9rem; border-radius: 20px; z-index: 4;
            pointer-events: none; text-transform: uppercase; letter-spacing: 1px; transition: opacity 0.3s;
        }
        .c-label--left { left: 20px; color: #ff6b6b; }
        .c-label--right { right: 20px; color: #4ade80; }
        .c-compare.interacting .c-label { opacity: 0.2; }

        /* --- HDR TABLE STYLES --- */
        .hdr-table-container {
            max-width: 900px; margin: 0 auto; overflow-x: auto;
            border: 1px solid var(--border-color); border-radius: 12px;
            background: var(--card-bg); box-shadow: 0 10px 30px rgba(0,0,0,0.3);
        }
        .hdr-table {
            width: 100%; border-collapse: collapse; font-size: 0.95rem; text-align: left;
        }
        .hdr-table th {
            background-color: #21262d; color: #fff; padding: 15px; font-weight: 600;
            border-bottom: 2px solid var(--border-color);
        }
        .hdr-table td {
            padding: 15px; border-bottom: 1px solid var(--border-color); color: var(--text-muted);
        }
        .hdr-table tr:last-child td { border-bottom: none; }
        .hdr-table tr:hover td { background-color: rgba(255,255,255,0.02); }
        
        .badge {
            display: inline-block; padding: 4px 10px; border-radius: 12px;
            font-size: 0.8rem; font-weight: bold;
        }
        .badge-green { background: rgba(46, 160, 67, 0.15); color: #3fb950; border: 1px solid rgba(46, 160, 67, 0.4); }
        .badge-blue { background: rgba(56, 139, 253, 0.15); color: #58a6ff; border: 1px solid rgba(56, 139, 253, 0.4); }

        /* --- FEATURES GRID --- */
        .features { padding: 80px 0; }
        .grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(300px, 1fr)); gap: 2rem; }
        .card {
            background: var(--card-bg); border: 1px solid var(--border-color);
            padding: 2rem; border-radius: 12px; transition: transform 0.3s, border-color 0.3s;
        }
        .card:hover { transform: translateY(-5px); border-color: var(--accent-blue); }
        .card h3 { font-size: 1.5rem; margin-bottom: 1rem; color: #fff; }
        .card p { color: var(--text-muted); }
        .icon { font-size: 2rem; margin-bottom: 1rem; display: block; }

        /* --- MODAL SYSTEM --- */
        .modal-overlay {
            position: fixed; top: 0; left: 0; width: 100%; height: 100%;
            background: rgba(0, 0, 0, 0.7); backdrop-filter: blur(8px);
            z-index: 1000; display: flex; align-items: center; justify-content: center;
            opacity: 0; pointer-events: none; transition: opacity 0.3s ease;
        }
        .modal-overlay.active { opacity: 1; pointer-events: all; }
        
        .modal-content {
            background: #0d1117; width: 90%; max-width: 900px; height: 85vh;
            border-radius: 12px; border: 1px solid var(--border-color);
            display: flex; flex-direction: column;
            transform: translateY(20px); transition: transform 0.3s cubic-bezier(0.18, 0.89, 0.32, 1.28);
            box-shadow: 0 25px 50px rgba(0,0,0,0.5);
        }
        .modal-overlay.active .modal-content { transform: translateY(0); }

        .modal-header {
            padding: 15px 25px; border-bottom: 1px solid var(--border-color);
            display: flex; justify-content: space-between; align-items: center;
            background: #161b22; border-radius: 12px 12px 0 0;
        }
        .modal-title { font-size: 1.2rem; font-weight: bold; color: #fff; }
        .modal-actions { display: flex; align-items: center; gap: 15px; }
        
        .btn-source {
            font-size: 0.8rem; padding: 6px 12px; background: rgba(56, 139, 253, 0.15);
            color: #58a6ff; text-decoration: none; border-radius: 6px; border: 1px solid rgba(56, 139, 253, 0.4);
            transition: all 0.2s;
        }
        .btn-source:hover { background: rgba(56, 139, 253, 0.3); }

        .close-btn {
            background: none; border: none; color: #8b949e; font-size: 2rem;
            cursor: pointer; line-height: 1; transition: color 0.2s;
        }
        .close-btn:hover { color: #fff; }

        .modal-body {
            flex: 1; padding: 40px; overflow-y: auto; color: var(--text-main);
            font-size: 1rem; line-height: 1.7;
        }
        
        /* Markdown Styles Inside Modal */
        .modal-body h1, .modal-body h2, .modal-body h3 { margin-top: 1.5em; margin-bottom: 0.5em; color: #fff; border-bottom: 1px solid #30363d; padding-bottom: 0.3em; }
        .modal-body h1 { font-size: 2rem; border-bottom: none; }
        .modal-body code { background: rgba(110,118,129,0.4); padding: 0.2em 0.4em; border-radius: 6px; font-family: monospace; }
        .modal-body pre { background: #161b22; padding: 16px; border-radius: 6px; overflow-x: auto; margin: 1em 0; border: 1px solid #30363d; }
        .modal-body pre code { background: none; padding: 0; }
        .modal-body a { color: var(--accent-blue); text-decoration: none; }
        .modal-body blockquote { border-left: 4px solid var(--accent-blue); padding-left: 1em; color: var(--text-muted); margin: 1em 0; }
        .modal-body table { width: 100%; border-collapse: collapse; margin: 1em 0; }
        .modal-body th, .modal-body td { border: 1px solid #30363d; padding: 8px; text-align: left; }
        .modal-body img { max-width: 100%; border-radius: 8px; border: 1px solid #30363d; }

        /* --- FOOTER --- */
        footer { text-align: center; padding: 40px; border-top: 1px solid var(--border-color); color: var(--text-muted); }
        
        @media (max-width: 768px) {
            .hero-content h1 { font-size: 2.5rem; }
            .c-compare { height: 300px; } 
            .modal-content { width: 100%; height: 100%; border-radius: 0; }
            .hdr-table th, .hdr-table td { padding: 10px; font-size: 0.85rem; }
        }
    </style>
	
	<script type="application/ld+json">
    {
      "@context": "https://schema.org",
      "@type": "SoftwareApplication",
      "name": "MPV Anime Build",
      "operatingSystem": "Windows",
      "applicationCategory": "MultimediaApplication",
      "offers": {
        "@type": "Offer",
        "price": "0",
        "priceCurrency": "USD"
      },
      "description": "Automated MPV configuration for high-quality Anime and Live-Action upscaling using Anime4K and NNEDI3.",
      "author": {
        "@type": "Person",
        "name": "Chinna95P"
      },
      "downloadUrl": "https://github.com/Chinna95P/mpv-anime-build/releases",
      "softwareVersion": "1.5"
    }
    </script>
</head>
<body>

    <header>
        <div class="container hero-content">
            <h1>MPV Anime Build v1.5.1</h1>
            <p>Automated High-Quality Upscaling for Anime & Live Action.</p>
            
            <div class="hero-buttons">
                <a href="https://github.com/Chinna95P/mpv-anime-build/releases" class="btn">Download v1.5.1 Release</a>
                <a href="https://github.com/Chinna95P/mpv-anime-build" class="btn btn-blue">Source GitHub Page</a>
                
                <a href="https://discord.gg/Pvf3huxFvU" class="btn" style="background-color: #5865F2; margin-left: 10px;">Join Discord</a>
            </div>

            <div class="docs-nav">
                <button class="doc-btn" onclick="openDoc('Readme.md', 'https://github.com/Chinna95P/mpv-anime-build/blob/main/Readme.md')">
                    üìÑ Readme
                </button>
                <button class="doc-btn" onclick="openDoc('CHANGELOG.md', 'https://github.com/Chinna95P/mpv-anime-build/blob/main/CHANGELOG.md')">
                    üìú Changelog
                </button>
                <button class="doc-btn" onclick="openDoc('docs/Install.md', 'https://github.com/Chinna95P/mpv-anime-build/blob/main/docs/Install.md')">
                    üîß Instructions
                </button>
                <button class="doc-btn" onclick="openDoc('docs/Cheatsheet.md', 'https://github.com/Chinna95P/mpv-anime-build/blob/main/docs/Cheatsheet.md')">
                    ‚å®Ô∏è Cheatsheet
                </button>
                <button class="doc-btn" onclick="openDoc('FAQ.md', 'https://github.com/Chinna95P/mpv-anime-build/blob/main/FAQ.md')">
                    ‚ùì FAQ
                </button>

				
            </div>
        </div>
    </header>

    <section class="slider-section">
        <div class="container">
            <h2 class="slider-title reveal">Visual Comparisons</h2>

            <div class="reveal">
                <h3 style="text-align:center; color:var(--text-muted); margin-bottom:15px;">Anime Detection Logic</h3>
                <div class="c-compare">
                    <div class="c-compare__right">
                        <img src="screenshots/anime-on.jpg" alt="Anime On" class="c-compare__image">
                        <span class="c-label c-label--right">Anime Mode (Green)</span>
                    </div>
                    <div class="c-compare__left">
                        <img src="screenshots/anime-off.jpg" alt="Anime Off" class="c-compare__image">
                        <span class="c-label c-label--left">Live Action (Red)</span>
                    </div>
                    <div class="c-compare__handle"></div>
                </div>
            </div>

            <div class="reveal">
                <h3 style="text-align:center; color:var(--text-muted); margin-bottom:15px; margin-top:50px;">Live Action HD (Upscalers)</h3>
                <div class="c-compare">
                    <div class="c-compare__right">
                        <img src="screenshots/hd-fsrcnnx.jpg" alt="FSRCNNX" class="c-compare__image">
                        <span class="c-label c-label--right">FSRCNNX (Manual)</span>
                    </div>
                    <div class="c-compare__left">
                        <img src="screenshots/hd-nnedi.jpg" alt="NNEDI3" class="c-compare__image">
                        <span class="c-label c-label--left">NNEDI3 (Auto)</span>
                    </div>
                    <div class="c-compare__handle"></div>
                </div>
            </div>

            <div class="reveal">
                <h3 style="text-align:center; color:var(--text-muted); margin-bottom:15px; margin-top:50px;">Live Action SD (Restoration)</h3>
                <div class="c-compare">
                    <div class="c-compare__right">
                        <img src="screenshots/sd-texture.jpg" alt="Texture" class="c-compare__image">
                        <span class="c-label c-label--right">Texture Mode</span>
                    </div>
                    <div class="c-compare__left">
                        <img src="screenshots/sd-clean.jpg" alt="Clean" class="c-compare__image">
                        <span class="c-label c-label--left">Clean Mode</span>
                    </div>
                    <div class="c-compare__handle"></div>
                </div>
            </div>
            
            <div class="reveal">
                <h3 style="text-align:center; color:var(--text-muted); margin-bottom:20px; margin-top:60px;">HDR Tone Mapping & Passthrough Tests</h3>
                <div class="hdr-table-container">
                    <table class="hdr-table">
                        <thead>
                            <tr>
                                <th>Test Format</th>
                                <th>Source Type</th>
                                <th>MPV Behavior</th>
                                <th>Status</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <td><strong>HDR10</strong></td>
                                <td>HEVC 10-bit / PQ / BT.2020</td>
                                <td>Passthrough to Display (Auto-trigger)</td>
                                <td><span class="badge badge-green">Pass</span></td>
                            </tr>
                            <tr>
                                <td><strong>Dolby Vision P5</strong></td>
                                <td>HEVC 10-bit / DoVi / Streaming</td>
                                <td>Correct Tone Mapping (Fixes Purple Tint)</td>
                                <td><span class="badge badge-blue">Optimized</span></td>
                            </tr>
                            <tr>
                                <td><strong>Dolby Vision P8</strong></td>
                                <td>HEVC 10-bit / DoVi / Hybrid</td>
                                <td>Dynamic Tone Mapping to HDR10</td>
                                <td><span class="badge badge-green">Pass</span></td>
                            </tr>
                            <tr>
                                <td><strong>HLG</strong></td>
                                <td>VP9 / HLG / Broadcast</td>
                                <td>Correct Gamma / Brightness Map</td>
                                <td><span class="badge badge-green">Pass</span></td>
                            </tr>
                            <tr>
                                <td><strong>MaxCLL/FALL</strong></td>
                                <td>Static Metadata</td>
                                <td>Metadata Passed to GPU Driver</td>
                                <td><span class="badge badge-green">Pass</span></td>
                            </tr>
                        </tbody>
                    </table>
                </div>
            </div>

        </div>
    </section>

    <section class="features">
        <div class="container">
            <h2 class="slider-title reveal">Key Features</h2>
            <div class="grid">
                <div class="card reveal"><span class="icon">üß†</span><h3>Logic Lockdown</h3><p>Strict resolution gates (SD/HD/FHD) apply the perfect shader profile automatically.</p></div>
                <div class="card reveal"><span class="icon">‚ú®</span><h3>Anime4K Pipeline</h3><p>Upscale 1080p anime to 4K with restoration, or clean up old 480p DVDs.</p></div>
                <div class="card reveal"><span class="icon">üì∫</span><h3>Modern TV Mode</h3><p>Live Action uses NNEDI3 and Adaptive Sharpen to mimic Sony/Samsung TV processing.</p></div>
                <div class="card reveal"><span class="icon">üé®</span><h3>ModernZ Interface</h3><p>Sleek, modern on-screen controller with color-coded status overlay.</p></div>
                <div class="card reveal"><span class="icon">üöÄ</span><h3>Performance First</h3><p>Supports SVP 4 Pro motion interpolation and Thumbfast for instant seeking.</p></div>
                <div class="card reveal"><span class="icon">üîß</span><h3>Strict Gates</h3><p>Prevents accidental upscaling of high-res content, preserving fidelity.</p></div>
            </div>
        </div>
    </section>
	
	<section class="features" style="background: #0d1117; padding-top: 0;">
        <div class="container">
            <h2 class="slider-title reveal" style="font-size: 1.5rem; margin-bottom: 20px;">Included Shaders & Config Details</h2>
            <div style="background: #161b22; border: 1px solid #30363d; border-radius: 12px; padding: 30px; color: #8b949e;">
                <p style="margin-bottom: 15px;">
                    This <strong>MPV Custom Build</strong> is a pre-packaged solution that replaces manual configuration. 
                    It combines a highly tuned <code>mpv.conf</code> with the best open-source shaders available.
                </p>
                <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 20px; text-align: left;">
                    <div>
                        <h4 style="color: #fff; margin-bottom: 10px;">üé® Active Shaders</h4>
                        <ul style="list-style: none; padding: 0;">
                            <li>‚Ä¢ <strong>Anime4K v4.0</strong> (Upscale + Restore)</li>
                            <li>‚Ä¢ <strong>NNEDI3</strong> (Neural Network Upscaling)</li>
                            <li>‚Ä¢ <strong>FSRCNNX</strong> (High-Fidelity Resizing)</li>
                            <li>‚Ä¢ <strong>SSimSuperRes</strong> (Correction)</li>
                            <li>‚Ä¢ <strong>KrigBilateral</strong> (Chroma Scaling)</li>
                            <li>‚Ä¢ <strong>Adaptive Sharpen</strong> (Modern TV Style)</li>
                        </ul>
                    </div>
                    <div>
                        <h4 style="color: #fff; margin-bottom: 10px;">‚öôÔ∏è Config Features</h4>
                        <ul style="list-style: none; padding: 0;">
                            <li>‚Ä¢ <strong>Zero-Copy</strong> Hardware Decoding (NVIDIA/AMD)</li>
                            <li>‚Ä¢ <strong>SVP 4 Pro</strong> Motion Interpolation Ready</li>
                            <li>‚Ä¢ <strong>d3d11</strong> Native HDR Passthrough</li>
                            <li>‚Ä¢ <strong>Auto-Profiles</strong> for SD/HD/4K Content</li>
                            <li>‚Ä¢ <strong>ModernZ</strong> OSC Interface</li>
                        </ul>
                    </div>
                </div>
            </div>
        </div>
    </section>
	
    <footer>
        <p>MPV Anime Build v1.5.1 ‚Ä¢ Maintained by Chinna95P</p>
        <p>Credits: bloc97 (Anime4K), Samillion (ModernZ), po5 (Thumbfast)</p>
    </footer>

    <div id="doc-modal" class="modal-overlay">
        <div class="modal-content">
            <div class="modal-header">
                <div class="modal-title" id="modal-title">Documentation</div>
                <div class="modal-actions">
                    <a id="modal-source-btn" href="#" target="_blank" class="btn-source">View on GitHub ‚Üó</a>
                    <button class="close-btn" onclick="closeDoc()">&times;</button>
                </div>
            </div>
            <div id="modal-body" class="modal-body">
                <p style="text-align: center; color: #8b949e;">Loading...</p>
            </div>
        </div>
    </div>

    <script>
        // --- SCROLL ANIMATION ---
        const observer = new IntersectionObserver((entries) => {
            entries.forEach(entry => {
                if (entry.isIntersecting) entry.target.classList.add('active');
            });
        }, { threshold: 0.1 });
        document.querySelectorAll('.reveal').forEach(el => observer.observe(el));

        // --- ROBUST SLIDER LOGIC ---
        function initComparisons() {
            const containers = document.querySelectorAll('.c-compare');
            containers.forEach(container => {
                const leftLayer = container.querySelector('.c-compare__left');
                const leftImage = leftLayer.querySelector('.c-compare__image');
                const handle = container.querySelector('.c-compare__handle');
                let isDragging = false;
                function syncWidth() {
                    const w = container.offsetWidth;
                    leftImage.style.width = w + 'px';
                }
                syncWidth();
                window.addEventListener('resize', syncWidth);
                function move(x) {
                    const rect = container.getBoundingClientRect();
                    let pos = x - rect.left;
                    if (pos < 0) pos = 0;
                    if (pos > rect.width) pos = rect.width;
                    leftLayer.style.width = pos + 'px';
                    handle.style.left = pos + 'px';
                }
                function onInteractStart(e) {
                    e.preventDefault(); isDragging = true; container.classList.add('interacting');
                }
                function onInteractEnd() {
                    isDragging = false; container.classList.remove('interacting');
                }
                function onInteractMove(e) {
                    if (!isDragging) return;
                    const clientX = e.touches ? e.touches[0].clientX : e.clientX;
                    move(clientX);
                }
                handle.addEventListener('mousedown', onInteractStart);
                window.addEventListener('mouseup', onInteractEnd);
                window.addEventListener('mousemove', onInteractMove);
                handle.addEventListener('touchstart', onInteractStart);
                window.addEventListener('touchend', onInteractEnd);
                window.addEventListener('touchmove', onInteractMove);
                container.addEventListener('click', (e) => {
                    if (e.target === handle) return;
                    move(e.clientX);
                });
            });
        }
        window.addEventListener('load', initComparisons);

        // --- DOCS POPUP LOGIC ---
        const modal = document.getElementById('doc-modal');
        const modalBody = document.getElementById('modal-body');
        const modalTitle = document.getElementById('modal-title');
        const modalSourceBtn = document.getElementById('modal-source-btn');

        async function openDoc(filePath, sourceUrl) {
            // 1. Show Modal immediately with Loading state
            modal.classList.add('active');
            modalBody.innerHTML = '<div style="display:flex;justify-content:center;align-items:center;height:100%;"><p>Loading documentation...</p></div>';
            modalTitle.innerText = filePath.split('/').pop(); // "Readme.md"
            modalSourceBtn.href = sourceUrl;

            try {
                // 2. Fetch RAW content from GitHub
                const rawUrl = `https://raw.githubusercontent.com/Chinna95P/mpv-anime-build/main/${filePath}`;
                const response = await fetch(rawUrl);
                
                if (!response.ok) throw new Error("Failed to load file.");
                
                const markdownText = await response.text();

                // 3. Convert Markdown to HTML using marked.js
                // We fix image paths so screenshots work inside the modal
                const htmlContent = marked.parse(markdownText);
                
                // Fix relative image paths in Markdown (e.g. "screenshots/img.jpg" -> full raw url)
                const fixedHtml = htmlContent.replace(/src="screenshots\//g, 'src="https://raw.githubusercontent.com/Chinna95P/mpv-anime-build/main/screenshots/');

                modalBody.innerHTML = fixedHtml;

            } catch (error) {
                modalBody.innerHTML = `<p style="color: #ff6b6b;">Error loading document. Please view on GitHub.</p>`;
            }
        }

        function closeDoc() {
            modal.classList.remove('active');
        }

        // Close modal if clicking outside the content box
        modal.addEventListener('click', (e) => {
            if (e.target === modal) closeDoc();
        });
        
        // Close on ESC key
        document.addEventListener('keydown', (e) => {
            if (e.key === "Escape" && modal.classList.contains('active')) {
                closeDoc();
            }
        });
    </script>
</body>
</html>